<!DOCTYPE html>
<html lang="en" ng-app="patterns">
	<head>
		<title>Visitor Pattern</title>

		<meta name="viewport" content="width=device-width, initial-scale=1">

		<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.1/css/bootstrap.min.css">
		<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.1/css/bootstrap-theme.min.css">
		<link href="//maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css" rel="stylesheet">

		<script src="//ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
		<script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.3.5/angular.min.js"></script>
		<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.1/js/bootstrap.min.js"></script>

		

		<script src="js/app.js"></script>

		<script src="js/services.js"></script>
		<script src="js/directives.js"></script>
		<script src="js/controllers.js"></script>
		
	</head>
	<body class="container">
		<div ng-controller="mainCtrl as vm">
			<h1>{{vm.title}}</h1>
			<p>
				The visitor pattern is useful when we want to have a method that makes changes to an object either individually, or typically part of a collection.
			</p>

			<p>
				Perhaps we keep an inventory of products, and we are running a promition to give a 10% discount across all products. We can use the visitor pattern to have a seperate method apply this for our products.
			</p>

			<p>
				With the modularity of the pattern, we're able to run N visitors against our data, giving us a lot of future extensibility for our system.
			</p>

			<button class="btn btn-default" ng-click="vm.doDiscount()">
				<span class="fa fa-money"> Discount</span>
			</button>

			<hr/>

			<table class="table">
				<tr>
					<th>Product</th>
					<th>Price</th>
					<th>Discount</th>
					<th>Discount Amount</th>
					<th>Sale Price</th>
				</tr>
				<tr ng-repeat="product in vm.products">
					<td>{{product.getName()}}</td>
					<td>{{product.getPrice()}}</td>
					<td>{{product.getDiscountPercentStr()}}</td>
					<td>{{product.getDiscountAmount()}}</td>
					<td>{{product.getSalePrice()}}</td>
				</tr>
			</table>
		</div>
	</body>
</html>